# name: "Cache Nix Build"
# on:
#   pull_request:
#   push:
# jobs:
#   tests:
#     runs-on: ubuntu-latest
#     steps:
#     - uses: actions/checkout@v3
#     - uses: cachix/install-nix-action@v18
#       with:
#         nix_path: nixpkgs=channel:nixos-unstable
#     - uses: cachix/cachix-action@v12
#       with:
#         name: jedimaster
#         extraPullNames: devenv
#         authToken: '${{ secrets.CACHIX_AUTH_TOKEN }}'
#     - run: make action-build
#     - run: nix-shell --run "echo OK"


name: Cache on Cachix
on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Install cachix
        uses: cachix/install-cachix@v12
        with:
          cachix-bin: /usr/local/bin/cachix
      - name: Create cache
        run: cachix create my-cache --auth=${{ secrets.CACHIX_AUTH_TOKEN }}
      - name: Push to cache
        run: cachix push my-cache https://github.com/morphykuffour/nix.git

